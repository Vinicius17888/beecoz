// -- PRISMA SCHEMA --
// Observação importante: NADA de ponto-e-vírgula aqui. Cada argumento em sua própria linha.

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL") // USO normal da API (pool)
  directUrl = env("DIRECT_URL")   // USO pelo Prisma Migrate (conexão direta)
}


generator client {
  provider = "prisma-client-js"
}

enum Perfil {
  CLIENTE
  AUTONOMO
}

model Login {
  id         Int      @id @default(autoincrement())
  email      String?  @unique
  telefone   String?  @unique
  senhaHash  String
  perfil     Perfil
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  Cliente    Cliente?
  Autonomo   Autonomo?
}

model Cliente {
  id        Int     @id @default(autoincrement())
  loginId   Int     @unique
  nome      String
  genero    String?
  Login     Login   @relation(fields: [loginId], references: [id], onDelete: Cascade)
}

model Autonomo {
  id        Int     @id @default(autoincrement())
  loginId   Int     @unique
  nome      String
  area      String?
  nivel     Int     @default(1)
  Login     Login   @relation(fields: [loginId], references: [id], onDelete: Cascade)
}
